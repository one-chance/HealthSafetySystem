<!DOCTYPE html>
<html lang="en">


  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">


    <title>Cold Prediction </title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/portfolio-item.css" rel="stylesheet">
    <script> function reset(){window.location.reload(true);}</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="../../js/ios-orientationchange-fix.min.js"></script>
<style>
  img{
    width : auto;
    max-width: 100%
  }
</style>
  </head>

  <body>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
      <div class="container">
        <a class="navbar-brand" href="#" id="date"> <strong> Today : <script type = "text/javascript">
          var d = new Date();
          document.write((d.getMonth()+1)+'월 ');
          document.write(d.getDate()+'일'+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;");
        </script></strong></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
     
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item active">
              <input type="button" style="WIDTH: 80pt; HEIGHT: 30pt" onclick="search();" value="위험도 측정" background-color:"ff0000">
                 <span class="sr-only">(current)</span>
            </li>
            <li class="nav-item">
              <a class="nav-link" onclick="reset();" > 초기화</a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="#">위로</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Page Content -->
    <div class="container">

      <!-- Portfolio Item Heading -->
      <!--<h1 class="my-4" id="date">Today : </h1> -->


      <!-- Portfolio Item Row -->
      <div class="row">

        <div class="col-md-8">
          <img class="img-fluid" id="abc" name=abc src="img/korea.png" usemap="#zoo">
          <map name="zoo" id="zoo">
            <area onclick="btn0();" shape=CIRCLE coords="167, 152, 32" > <!--서울-->
            <area onclick="btn1();" shape=CIRCLE coords="100, 157, 20" > <!--인천-->
            <area onclick="btn2();" shape=CIRCLE coords="216, 202, 22" > <!--경기-->
            <area onclick="btn3();" shape=CIRCLE coords="351, 166, 30" > <!--강원-->

            <area onclick="btn4();" shape=CIRCLE coords="252, 272, 27" > <!--충북-->
            <area onclick="btn5();" shape=CIRCLE coords="116, 330, 25" > <!--충남-->
            <area onclick="btn6();" shape=CIRCLE coords="165, 456, 27" > <!--전북-->
            <area onclick="btn7();" shape=CIRCLE coords="162, 636, 27" > <!--전남-->

            <area onclick="btn8();" shape=CIRCLE coords="192, 358, 22" > <!--대전-->
            <area onclick="btn9();" shape=CIRCLE coords="116, 561, 24" > <!--광주-->
            <area onclick="btn10();" shape=CIRCLE coords="367, 333, 28" > <!--경북-->
            <area onclick="btn11();" shape=CIRCLE coords="280, 516, 27" > <!--경남-->

            <area onclick="btn12();" shape=CIRCLE coords="346, 438, 22" > <!--대구-->
            <area onclick="btn13();" shape=CIRCLE coords="437, 486, 20" > <!--울산-->
            <area onclick="btn14();" shape=CIRCLE coords="378, 535, 22" > <!--부산-->
            <area onclick="btn15();" shape=CIRCLE coords="436, 664, 15" > <!--제주-->


            <script>
                     var nx, ny;
                     function btn0(){ if(document.images)abc.src="img/korea_seoul.png"; getAPI(37.56, 126.97);}
                     function btn1(){ if(document.images)abc.src="img/korea_inchoen.png"; getAPI(37.45, 126.70);}
                     function btn2(){ if(document.images)abc.src="img/korea_gyeonggi.png"; getAPI(37.41, 127.51);}
                     function btn3(){ if(document.images)abc.src="img/korea_gangwon.png"; getAPI(37.82, 128.15);}

                     function btn4(){ if(document.images)abc.src="img/korea_chungbuk.png"; getAPI(36.80, 127.70);}
                     function btn5(){ if(document.images)abc.src="img/korea_chungnam.png"; getAPI(36.51, 126.80);}
                     function btn6(){ if(document.images)abc.src="img/korea_junbuk.png"; getAPI(35.71, 127.15);}
                     function btn7(){ if(document.images)abc.src="img/korea_junnam.png"; getAPI(34.86, 126.99);}

                     function btn8(){ if(document.images)abc.src="img/korea_daejeon.png"; getAPI(36.35, 127.38);}
                     function btn9(){ if(document.images)abc.src="img/korea_gwangjoo.png"; getAPI(35.15, 126.85);}
                     function btn10(){ if(document.images)abc.src="img/korea_gyeongbuk.png"; getAPI(36.49, 128.88);}
                     function btn11(){ if(document.images)abc.src="img/korea_gyeongnam.png"; getAPI(35.46, 128.21);}

                     function btn12(){ if(document.images)abc.src="img/korea_daegoo.png"; getAPI(35.87, 128.60);}
                     function btn13(){ if(document.images)abc.src="img/korea_ulsan.png"; getAPI(35.53, 129.31);}
                     function btn14(){ if(document.images)abc.src="img/korea_busan.png"; getAPI(35.17, 129.07);}
                     function btn15(){ if(document.images)abc.src="img/korea_jeju.png"; getAPI(33.48, 126.49);}
            </script>
          </map>
        </div>

        <div class="col-md-4">
          <h2 class="my-3"> <strong> 예상 위험도 </strong> </h2>
          <br>
          <img src="img/middle.png" id="danger">

          <br><br><br><br>

          <h3 class="my-3"> <strong> 감기 위험도란? </strong> </h3><p></p>
          <h5>&nbsp;&nbsp;환자데이터와 기상정보를 분석하여<p></p>특정 기상을 가진 날의 감기환자 수를<p></p>예측한다.
            &nbsp;그 결과와 전체 기상 대비<p></p>환자수의 평균을 비교한 것을 위험도로<p></p>
            나타낸다. 환자가 평균의 2배 이상이면<p></p>고위험으로 분류한다.</h5>
          
          <br><br><br>
            
          <form action='/purchase' method="get">
	<table>
              <input type="submit" value="제품 구매" style="WIDTH: 250pt; HEIGHT:50pt; font:bold 20pt 견고딕">  
	</table>
	</form>
      
        </div>

      </div>
      <!-- /.row -->

      <!-- Related Projects Row -->
      <br><br><br>
      <h3 class="my-4"> <strong> 기상 요소 </strong></h3>
 <form id="my-form" action="/mymodel" method="GET">
      <div class="row">

        <div class="col-md-3 col-sm-6 mb-4" id="content">
            <img class="img-fluid" src="img/lt.png" title="최저기온은 바이러스의 활성화와 인간의 면역체계에 영향을 미친다.">
          <input type='text' id='wf1' value='최저기온(℃)' style="text-align:center" readonly="readonly" onfocus="this.blur()"/>
          <input type='text' id='wf1-1' value='0' style="text-align:center" readonly="readonly" onfocus="this.blur()"/>
          <input type='hidden' id='wf1-2' name='WT1' value='0' style="text-align:center" readonly="readonly"/>
        </div>

        <div class="col-md-3 col-sm-6 mb-4">
            <img class="img-fluid" src="img/ht.png" title="최고기온은 바이러스의 활성화와 인간의 면역체계에 영향을 미친다.">
          <input type='text' id='wf2' value='최고기온(℃)' style="text-align:center" readonly="readonly" onfocus="this.blur()"/>
          <input type='text' id='wf2-1' value='0' style="text-align:center" readonly="readonly" onfocus="this.blur()"/>
          <input type='hidden' id='wf2-2' name='WT2' value='0' style="text-align:center" readonly="readonly"/>
        </div>

        <div class="col-md-3 col-sm-6 mb-4">
            <img class="img-fluid" src="img/dtd.png" title="일교차는 바이러스의 활성화와 인간의 면역체계에 영향을 미친다.">
          <input type='text' id='wf3' value='일교차(℃)' style="text-align:center" readonly="readonly" onfocus="this.blur()"/>
          <input type='text' id='wf3-1' value='0' style="text-align:center" readonly="readonly" onfocus="this.blur()"/>
          <input type='hidden' id='wf3-2' name='WT3' value='0' style="text-align:center" readonly="readonly"/>
        </div>

        <div class="col-md-3 col-sm-6 mb-4">
            <img class="img-fluid" src="img/humidity.png" title="습도가 낮으면 점막이 건조해져서 바이러스가 침투하기 쉽다.">
          <input type='text' id='wf4' value='습도(%)' style="text-align:center" readonly="readonly" onfocus="this.blur()"/>
          <input type='text' id='wf4-1' value='0' style="text-align:center" readonly="readonly" onfocus="this.blur()"/>
          <input type='hidden' id='wf4-2' name='WT4' value='0' style="text-align:center" readonly="readonly"/>
        </div>

        <div class="col-md-3 col-sm-6 mb-4">
            <img class="img-fluid" src="img/pressure.png" title="기압이 높을 때 날씨가 맑고 습도가 내려가고 미세먼지 양이 증가한다.">
          <input type='text' id='wf5' value='기압' style="text-align:center" readonly="readonly" onfocus="this.blur()"/>
          <input type='text' id='wf5-1' value='0' style="text-align:center" readonly="readonly" onfocus="this.blur()"/>
          <input type='hidden' id='wf5-2' name='WT5' value='0' style="text-align:center" readonly="readonly"/>
        </div>

        <div class="col-md-3 col-sm-6 mb-4">
            <img class="img-fluid" src="img/finedust.png" title="미세먼지는 호흡기 질환에 영향을 주며 세균에 쉽게 노출되도록 한다.">
          <input type='text' id='wf6' value='미세먼지' style="text-align:center" readonly="readonly" onfocus="this.blur()"/>
          <input type='text' id='wf6-1' value='0' style="text-align:center" readonly="readonly" onfocus="this.blur()"/>
          <input type='hidden' id='wf6-2' name='WT6' value='0' style="text-align:center" readonly="readonly"/>
        </div>

        <div class="col-md-3 col-sm-6 mb-4">
            <img class="img-fluid" src="img/precipitation.png" title="강수량은 습도와 미세먼지의 양에 영향을 준다.">
          <input type='text' id='wf7' value='강수량(mm)' style="text-align:center" readonly="readonly" onfocus="this.blur()"/>
          <input type='text' id='wf7-1' value='0' style="text-align:center" readonly="readonly" onfocus="this.blur()"/>
          <input type='hidden' id='wf7-2' name='WT7' value='0' style="text-align:center" readonly="readonly"/>
      </div>

        <div class="col-md-3 col-sm-6 mb-4">
            <img class="img-fluid" src="img/cloud.png" title="감기를 예방하는 비타민D가 햇빛으로부터 합성되는데, 구름량이 많으면 햇빛이 적다.">
          <input type='text' id='wf8' value='구름량' style="text-align:center" readonly="readonly" onfocus="this.blur()"/>
          <input type='text' id='wf8-1' value='0' style="text-align:center" readonly="readonly" onfocus="this.blur()"/>
          <input type='hidden' id='wf8-2' name='WT8' value='0' style="text-align:center" readonly="readonly"/>
          <input id="Level" value='1' name='Level' type='hidden' readonly="readonly" onfocus="this.blur()"/>

      </div>

      <!-- /.row -->

    </div>
  </form>
    <!-- /.container -->

    <!-- Footer -->
    <footer class="py-5 bg-dark">
      <div class="container">
        <p class="m-0 text-center text-white">Copyright &copy; Dducbaegi Squad 2017</p>
      </div>
      <!-- /.container -->
    </footer>

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/popper/popper.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.min.js"></script>

    <script>
      function getAPI(nx, ny){
      
      $.ajax({
       method: "GET",
        url: "/getAPI",
        data: {lat : nx,
                  lon : ny}   // parameter 보내는 법
       }).done(function(res){

        //JSON PARSING, ~~~~~~~~~~~
          console.log(res);  
          var WF1=0, WF2=0, WF3=0, WF4=0, WF5=0, WF6=0, WF7=0, WF8=0; <!--기상요소-->

          WF1 = res.LowestTemperature;
          WF2 = res.HighestTemperature;
          WF3 = res.DailyTemperatureDifference
          WF4 = res.Humidity;
          WF5 = res.Pressure;
          WF6 = res.Finedust;
          WF7 = res.Precipitation;
          WF8 = res.Cloud;

          $("#wf1-1").val(WF1);
          $("#wf2-1").val(WF2);
          $("#wf3-1").val(WF3);
          $("#wf4-1").val(WF4);
          $("#wf5-1").val(WF5);
          $("#wf6-1").val(WF6);
          $("#wf7-1").val(WF7);
          $("#wf8-1").val(WF8);

          if(WF1<5){WF1=0}
            else if(WF1>-5 && WF1<5){WF1=1;}
            else if(WF1>=5 && WF1<15){WF1=2;}
            else if(WF1>=15 && WF1<20){WF1=3;}
            else if(WF1>=20 && WF1<25){WF1=4;}
            else if(WF1>=25){WF1=5;}
       
            if(WF2<5){WF2=0;}
            else if(WF2>=5 && WF2<15){WF2=1;}
            else if(WF2>=15 && WF2<25){WF2=2;}
            else if(WF2>=25 && WF2<35){WF2=3;}
            else if(WF2>=35){WF2=4;}

            if(WF3<10){WF3=0;}
            else if(WF3>=10 && WF3<20){WF3=1;}
            else if(WF3>=20){WF3=2;}

            if(WF4<40){WF4=0}
            else if(WF4>=40 && WF4<60){WF4=1;}
            else if(WF4>=60 && WF4<80){WF4=2;}
            else if(WF4>=80){WF4=3;}

            /*
            if(WF5<){}
              else{}
           */

            //WF6 미세먼지 기준
            if(WF6<40){WF6=0;}
            else if(WF6<80){WF6=1;}
            else if(WF6<120){WF6=2;}
            else{WF6=3;}
            
            if(WF7>=0 && WF7<20){WF7=0;}
            else if(WF7>=20 && WF7<40){WF7=1;}
            else if(WF7>=40 && WF7<60){WF7=2;}
            else if(WF7>=80){WF7=3;}

       if(WF8 == "SKY_A01"){WF8=0;}
       else if(WF8 =="SKY_A02"){WF8=1;}
       else if(WF8=="SKY_A03" || WF8=="SKY_A04" || WF8=="SKY_A05" || WF8=="SKY_A06"){WF8=2;}
       else{WF8=3;}

 	$("#wf1-2").val(WF1);
	$("#wf2-2").val(WF2);
	$("#wf3-2").val(WF3);
	$("#wf4-2").val(WF4);
	$("#wf5-2").val(1);
	$("#wf6-2").val(WF6);
	$("#wf7-2").val(WF7);
	$("#wf8-2").val(WF8);

 /*
- SKY_A01: 맑음
- SKY_A02: 구름조금
- SKY_A03: 구름많음, SKY_A04: 구름많고 비, SKY_A05: 구름많고 눈, SKY_A06: 구름많고 비 또는 눈
- SKY_A07: 흐림, SKY_A08: 흐리고 비, SKY_A09: 흐리고 눈, SKY_A10:  흐리고 비 또는 눈, SKY_A11: 흐리고 낙뢰, SKY_A12: 뇌우, 비, SKY_A13: 뇌우, 눈, SKY_A14: 뇌우, 비 또는 눈
 */
      }
    );
  };

</script>

<script>
      function search(){
      console.log("Loading...search")
      $.ajax({
       method: "GET",
        url: "/mymodel",
        data: $('#my-form').serialize()
       }).done(function(res){
        var risk = res.Risk;
      //$('#result').text(res)
       console.log("Labeled: " + risk);

       if(risk==1)
       {
          if(document.images)danger.src="img/low.png";
       } 
        if(risk==2)
        {
          if(document.images)danger.src="img/high.png";
        }

      }
    );
  };

</script>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="jquery.rwdImageMaps.min.js"></script>

<script>
$(document).ready(function(e) {
  $('img[usemap]').rwdImageMaps();
});
</script>

</body>

</html>